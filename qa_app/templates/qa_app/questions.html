{% extends "qa_app/base.html" %}

{% block content %}


{% for q in questions %}
  <div class="question">
    <h3>{{q.text}}</h3>
    <p>Опубликовано: {{q.created_at}}</p>
    {% if show_answers %}
      <div class="answers">
          <h4>Ответы:</h4>
          {% for a in q.answers_set.all %}
            <div class="answer">
                <p>{{a.text}}</p>
                <p>Пользователь: {{a.user_id}}, Опубликовано: {{a.created_at}}</p>
            </div>
          {% empty %}
            <p>На данный момент к этому вопросу нет ответов.</p>
          {% endfor %}
          <h4>Добавить новый ответ</h4>
          <form id="answerForm" action="{{ q.id }}/answers/" method="POST">
              <label for="user_answer">Текст ответа:</label>
              <input type="text" id="user_question" name="text" required>
              <input type="hidden" name="user_id" value="d1bb64b1-1004-460b-a2e7-a63512cc45f1">
              <input type="hidden" name="question_id" value="{{ q.id }}">
              <button type="submit">Добавить новый ответ</button>
          </form>
      </div>
    {% endif %}
</div>
{% empty %}
  <h3>На данный момент нет сохранённых вопросов.</h3>
{% endfor %}


<h3>Добавить новый вопрос</h3>
<form id="questionForm" action="" method="POST">
    <label for="user_question">Текст вопроса:</label>
    <input type="text" id="user_question" name="text" required>
    <button type="submit">Создать новый вопрос</button>
</form>

{% endblock content %}